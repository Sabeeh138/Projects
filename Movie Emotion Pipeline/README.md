# Emotion-Based Movie Recommendation System

A smart movie recommendation system that suggests movies based on the user's emotional state. This project combines a Django-based web interface (Chatbot & Form) with an NLP pipeline for emotion detection and a Knowledge Graph for structured data visualization.

## Features

- **Emotion-Aware Chatbot:** Interacts with users to understand their mood and recommends movies accordingly.
- **Form-Based Recommendation:** Allows users to input specific criteria along with their emotional state.
- **Emotion Analysis Pipeline:** Uses `transformers` (DistilRoBERTa) and `spacy` to analyze movie reviews and tag movies with emotions (Joy, Sadness, Anger, Fear, etc.).
- **Knowledge Graph:** Visualizes relationships between Movies, Genres, Directors, and Emotions using `networkx` and `matplotlib`.

## Prerequisites

Ensure you have Python installed. You will need the following libraries:

- Django
- pandas
- networkx
- matplotlib
- transformers
- spacy
- torch

You also need to download the spacy model:
```bash
python -m spacy download en_core_web_sm
```

## Installation

1.  **Navigate to the project directory:**
    ```bash
    cd "KRR Project"
    ```

2.  **Install Dependencies:**
    (It is recommended to use a virtual environment)
    ```bash
    pip install django pandas networkx matplotlib transformers spacy torch
    ```

3.  **Data Processing:**
    The system relies on tagged movie data.
    - Ensure you have a `movies.csv` file in the root directory.
    - Run the pipeline to generate `movies_tagged.csv`:
    ```bash
    python emotion_pipeline.py
    ```

4.  **Database Setup:**
    Navigate to the Django project folder:
    ```bash
    cd KRR_Project
    python manage.py migrate
    ```
    *Note: You will need to populate the database with movie data (e.g., via Django Admin or by creating a custom import script using `movies_tagged.csv`).*

## Usage

### Running the Web Application

1.  Navigate to the Django project directory:
    ```bash
    cd KRR_Project
    ```

2.  Start the server:
    ```bash
    python manage.py runserver
    ```

3.  Open your browser and visit: `http://127.0.0.1:8000/`

    - **Home:** Landing page.
    - **Chat:** Interact with the Smart Movie Chatbot.
    - **Form:** Get recommendations via a structured form.

### Generating the Knowledge Graph

To generate and visualize the Knowledge Graph of movies and emotions:

1.  Ensure `movies_tagged.csv` exists (generated by `emotion_pipeline.py`).
2.  Run the script:
    ```bash
    python KG.py
    ```
3.  This will generate an image file `movie_emotions_kg.png` visualizing the relationships.

## Project Structure

- `KRR_Project/`: The main Django project folder.
    - `movies_recommendation/`: The Django app handling views and logic.
    - `templates/`: HTML templates for the web interface.
    - `static/`: CSS and JS files.
    - `manage.py`: Django management script.
- `emotion_pipeline.py`: Script to process movie reviews and extract emotions.
- `KG.py`: Script to build and visualize the Knowledge Graph.
- `movies.csv`: Input dataset (user provided).
- `movies_tagged.csv`: Processed dataset with emotion tags.

## Technologies

- **Backend:** Django 6.0
- **NLP:** Hugging Face Transformers, Spacy
- **Data Processing:** Pandas
- **Visualization:** NetworkX, Matplotlib
